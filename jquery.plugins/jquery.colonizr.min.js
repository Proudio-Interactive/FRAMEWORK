/* =============================================================
 *
 * jQuery colonizr V0.9.5 - Molokoloco 2013 - Copyleft
 * "In-between titles Multicols paragraphes" (Bootstrap-like plugin)
 *
 * Blog post : http://www.b2bweb.fr/molokoloco/jquery-colonize-plugin-in-between-titles-multicols-paragraphes-with-css3/
 * Live fiddle demo : http://jsfiddle.net/molokoloco/Ra288/
 * Github :
 *   - https://github.com/molokoloco/FRAMEWORK/blob/master/jquery.plugins/jquery.colonizr.js
 *   - https://github.com/molokoloco/FRAMEWORK/blob/master/jquery.plugins/jquery.colonizr.min.js
 *   - https://github.com/molokoloco/FRAMEWORK/blob/master/jquery.plugins/jquery.colonizr.css
 *
 * ============================================================== */

!function(b){function l(c,f){this.options=b.extend(!0,{},b.fn.colonizr.defaults,"object"==typeof f&&f||{});this.$container=b(c);this.wrapper='<div class="'+this.options.css+'"/>';this.cWidth;this.intentNextP;this.lineMinHeight;this.maxHeight;this.estimateHeight;this.refresh()}l.prototype={constructor:l,colsExtractor:function(c,f){for(var d=b(f),a=d.next(),e=[],h=0,g=0;a;)a.is(this.options.chapters)?a=null:a.is(this.options.take)?(e.push(a),a=a.next()):(g++,10<g?a=null:(d=a,a=a.next()));this.estimateHeight=
0;if(e.length)for(a=0,g=e.length;a<g;a++)this.estimateHeight+=e[a].outerHeight();if(e.length&&this.estimateHeight>this.lineMinHeight){for(var k=b(this.wrapper),a=0,g=e.length;a<g;a++)if("&nbsp;"!=e[a].html()||0!=h&&a!=g)h+=e[a].outerHeight(),k.append(e[a].detach()),e[a+1]&&this.maxHeight<=h+e[a+1].outerHeight()&&(k.insertAfter(d),d=k,h=0,k=b(this.wrapper));k.insertAfter(d)}},refresh:function(){this.cWidth=this.$container.width();this.maxHeight=this.options.maxHeight;this.lineMinHeight=this.intentNextP=
0;1>this.options.maxHeight&&(this.maxHeight=Math.max(80,0.8*b(window).height()));var c=b("<p>A</p>").appendTo(this.$container);this.lineMinHeight=c.outerHeight()*this.options.minLine;c.remove();c=this.$container.find("."+this.options.css);if(c.length){var f=this.$container.prev();this.$container.detach();c.each(function(){var a=b(this);b(a.html()).insertBefore(a);a.remove()});this.$container.insertAfter(f)}var d=this;this.$container.find(this.options.chapters).each(function(a,c){setTimeout(b.proxy(d.colsExtractor,
d),0,a,c)})}};var m=b.fn.colonizr;b.fn.colonizr=function(c){return this.each(function(){var f=b(this),d=f.data("colonizr");d||f.data("colonizr",d=new l(this,c));if("string"==typeof c)d[c]()})};b.fn.colonizr.Constructor=l;b.fn.colonizr.defaults={chapters:"h1,h2,h3,h4,h5,h6",take:"p",css:"multiplecolumns",minLine:2,maxHeight:null};b.fn.colonizr.noConflict=function(){b.fn.colonizr=m;return this};b(window).on("load",function(){b('[data-colonizr="true"]').each(function(){var c=b(this);c.colonizr(c.data())})})}(window.jQuery);