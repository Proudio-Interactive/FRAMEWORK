/* =============================================================
 *
 * jQuery colonizr V0.9.5 - Molokoloco 2013 - Copyleft
 * "In-between titles Multicols paragraphes" (Bootstrap-like plugin)
 *
 * Blog post : http://www.b2bweb.fr/molokoloco/jquery-colonize-plugin-in-between-titles-multicols-paragraphes-with-css3/
 * Live fiddle demo : http://jsfiddle.net/molokoloco/Ra288/
 * Github :
 *   - https://github.com/molokoloco/FRAMEWORK/blob/master/jquery.plugins/jquery.colonizr.js
 *   - https://github.com/molokoloco/FRAMEWORK/blob/master/jquery.plugins/jquery.colonizr.min.js
 *   - https://github.com/molokoloco/FRAMEWORK/blob/master/jquery.plugins/jquery.colonizr.css
 *
 * ============================================================== */

!function(b){function g(c,f){this.options=b.extend(!0,{},b.fn.colonizr.defaults,"object"==typeof f&&f||{});this.$container=b(c);this.wrapper='<div class="'+this.options.css+'"/>';this.cWidth;this.intentNextP;this.lineMinHeight;this.maxHeight;this.estimateHeight;this.refresh()}g.prototype={constructor:g,colsExtractor:function(c,f){for(var d=b(f),a=d.next(),e=[],g=!1,k=0;a;)a.is(this.options.take)?(e.push(a),a=a.next()):(a.is(this.options.chapters)||(g=!0),a=null);this.estimateHeight=0;if(e.length)for(var a=
0,l=e.length;a<l;a++)this.estimateHeight+=e[a].outerHeight();if(e.length&&this.estimateHeight>this.lineMinHeight){for(var h=b(this.wrapper),a=0,l=e.length;a<l;a++)if(0!=k||"&nbsp;"!=e[a].html())k+=e[a].outerHeight(),h.append(e[a].detach()),e[a+1]&&this.maxHeight<=k+e[a+1].outerHeight()&&(h.insertAfter(d),d=h,k=0,h=b(this.wrapper));h.insertAfter(d);g&&this.colsExtractor(0,h.next())}else g&&(this.intentNextP++,3>this.intentNextP&&d.next()&&this.colsExtractor(0,d.next()))},refresh:function(){this.cWidth=
this.$container.width();this.lineMinHeight=this.intentNextP=0;this.maxHeight=this.options.maxHeight;1>this.options.maxHeight&&(this.maxHeight=Math.max(80,0.8*b(window).height()));var c=b("<p>A</p>").appendTo(this.$container);this.lineMinHeight=c.outerHeight()*this.options.minLine;c.remove();c=this.$container.find("."+this.options.css);if(c.length){var f=this.$container.prev();this.$container.detach();c.each(function(){var a=b(this);b(a.html()).insertBefore(a);a.remove()});this.$container.insertAfter(f)}var d=
this;this.$container.find(this.options.chapters).each(function(a,c){setTimeout(b.proxy(d.colsExtractor,d),0,a,c)})}};var m=b.fn.colonizr;b.fn.colonizr=function(c){return this.each(function(){var f=b(this),d=f.data("colonizr");d||f.data("colonizr",d=new g(this,c));if("string"==typeof c)d[c]()})};b.fn.colonizr.Constructor=g;b.fn.colonizr.defaults={chapters:"h1,h2,h3,h4,h5,h6",take:"p",css:"multiplecolumns",minLine:2,maxHeight:null};b.fn.colonizr.noConflict=function(){b.fn.colonizr=m;return this};b(window).on("load",
function(){b('[data-colonizr="true"]').each(function(){var c=b(this);c.colonizr(c.data())})})}(window.jQuery);